# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

Sesh is a smart terminal session manager written in Go that helps users create and manage tmux sessions quickly and easily using zoxide. It's a CLI tool that integrates with tmux and zoxide to provide intelligent session management.

## Core Architecture

- **Module**: `github.com/joshmedeski/sesh/v2`
- **Go Version**: 1.23.0 (toolchain 1.24.3)
- **Main Entry Point**: `main.go` â†’ `seshcli.App()`

### Key Packages

- `seshcli/` - CLI command implementations (connect, list, preview, clone, last, tui)
- `lister/` - Lists sessions from various sources (tmux, zoxide, config)
- `connector/` - Handles session connections
- `tmux/` - Tmux integration
- `zoxide/` - Zoxide integration
- `configurator/` - Configuration management (`sesh.toml` in `$XDG_CONFIG_HOME/sesh`)
- `tui/` - Terminal UI implementation using Bubble Tea (currently under development)

### Session Sources

1. **Tmux**: Active tmux sessions
2. **Zoxide**: Frequently used directories
3. **Config**: User-defined sessions in configuration
4. **Tmuxinator**: Tmuxinator project configurations

## Common Development Commands

### Build
```bash
make build
# Or directly:
go build -ldflags "-X 'main.version=`git describe --tags --abbrev=0`'" -o $GOPATH/bin/sesh
```

### Test
```bash
make test
# Or directly:
go test -cover -bench=. -benchmem -race ./... -coverprofile=coverage.out
```

### Run a single test
```bash
go test -run TestFunctionName ./package/...
```

### Generate mocks
```bash
# Uses mockery v2.52.3
mockery --all
```

## Development Notes

- The project uses dependency injection with interfaces for testability
- Mock files follow the pattern `mock_*.go` generated by mockery
- Configuration is stored in TOML format (`sesh.toml`)
- The TUI feature is currently under active development on the `tui` branch
- When editing code, follow existing patterns for error handling, logging, and interface design
